// ### قبل: systemReset
async function systemReset() {
  await fetch(`${API_BASE_URL}/admin/reset`, {
    method: 'POST'
  });
  alert('System reset!');
}

// ### بعد: systemReset مع credentials
async function systemReset() {
  await fetch(`${API_BASE_URL}/admin/reset`, {
    method: 'POST',
    credentials: 'include'
  });
  alert('System reset!');
}

// ### قبل: rebootDevice
async function rebootDevice() {
  await fetch(`${API_BASE_URL}/admin/reboot`, {
    method: 'POST'
  });
  alert('Device rebooting...');
}

// ### بعد: rebootDevice مع credentials
async function rebootDevice() {
  await fetch(`${API_BASE_URL}/admin/reboot`, {
    method: 'POST',
    credentials: 'include'
  });
  alert('Device rebooting...');
}

// ### قبل: shutdownSystem
async function shutdownSystem() {
  await fetch(`${API_BASE_URL}/admin/shutdown`, {
    method: 'POST'
  });
  alert('System shutting down...');
}

// ### بعد: shutdownSystem مع credentials
async function shutdownSystem() {
  await fetch(`${API_BASE_URL}/admin/shutdown`, {
    method: 'POST',
    credentials: 'include'
  });
  alert('System shutting down...');
}

// ### قبل: adminLogout
async function adminLogout() {
  await fetch(`${API_BASE_URL}/admin/logout`, { method: 'POST' });
  is_admin = false;
  updateUIForAdmin();
  alert('You have been logged out');
}

// ### بعد: adminLogout مع credentials
async function adminLogout() {
  await fetch(`${API_BASE_URL}/admin/logout`, {
    method: 'POST',
    credentials: 'include'
  });
  is_admin = false;
  updateUIForAdmin();
  alert('You have been logged out');
}




async function checkAdminStatus() {
  try {
    const res = await fetch(`${API_BASE_URL}/admin/status`, {
      credentials: 'include'
    });
    const data = await res.json();
    is_admin = data.is_admin;
    updateUIForAdmin(); // دالة تتحكم بظهور أزرار الأدمن
  } catch (error) {
    console.error('فشل التحقق من حالة الأدمن:', error);
  }
}

// شغّلها عند بداية التشغيل
checkAdminStatus();
