# server.py

from fastapi import FastAPI
from pydantic import BaseModel
from pi5neo import Pi5Neo
import asyncio
from collections import deque
from fastapi.middleware.cors import CORSMiddleware
import threading
import time
import json
import colorsys
import math
import random 
from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
from fastapi import HTTPException, status
import secrets
import os
import json
from fastapi import Depends
from fastapi import Request



NUM_LEDS = 150
neo = Pi5Neo('/dev/spidev0.0', NUM_LEDS, 800)

BRIGHTNESS_SCALE = 0.25


app = FastAPI()
security = HTTPBearer()

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"]
)

animation_queue = deque()
animation_lock = threading.Lock()
stop_requested = False
current_hex: str | None = "#000000"
current_anim: str | None = None

class AnimationRequest(BaseModel):
    animation_type: str
    color_index: int = 0
    hex_color: str | None = None   # <-- we already need this

class ColorRequest(BaseModel):
    hex_color: str

    
# admin setting
ADMIN_PASSWORD = "RoomB107"  # ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø£Ø¯Ù…Ù† (ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ±Ù‡Ø§)
ADMIN_TOKEN = None
SERVER_LOCKED = False
FREEZE_COLOR = False
VISITOR_MESSAGE = ""
DEMO_MODE = False
login_attempts = {}
MAX_ATTEMPTS = 5
BLOCK_TIME = 300  # 5 Ø¯Ù‚Ø§Ø¦Ù‚


@app.on_event("startup")
async def on_startup():
    # ØªØ­Ù…ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙŠØ±ÙØ± Ù…Ù† Ù…Ù„Ù
    load_server_state()
    asyncio.create_task(animation_worker())
    
    # ØªØ´ØºÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø³ØªØ¹Ø±Ø§Ø¶ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹
    if DEMO_MODE:
        asyncio.create_task(start_demo_mode())

def load_server_state():
    global SERVER_LOCKED, FREEZE_COLOR, VISITOR_MESSAGE, DEMO_MODE
    try:
        with open("server_state.json", "r") as f:
            state = json.load(f)
            SERVER_LOCKED = state.get("locked", False)
            FREEZE_COLOR = state.get("frozen", False)
            VISITOR_MESSAGE = state.get("message", "")
            DEMO_MODE = state.get("demo_mode", False)
    except FileNotFoundError:
        save_server_state()

def save_server_state():
    state = {
        "locked": SERVER_LOCKED,
        "frozen": FREEZE_COLOR,
        "message": VISITOR_MESSAGE,
        "demo_mode": DEMO_MODE
    }
    with open("server_state.json", "w") as f:
        json.dump(state, f)

# ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙƒÙ† Ø§Ù„Ø£Ø¯Ù…Ù†
def verify_admin_token(credentials: HTTPAuthorizationCredentials):
    global ADMIN_TOKEN
    if not credentials or credentials.credentials != ADMIN_TOKEN:
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="Invalid admin token"
        )
    return True

# ØªØ­Ø¯ÙŠØ« Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù‚ÙÙ„
@app.post("/animate")
async def start_animation(req: AnimationRequest):
    global SERVER_LOCKED, FREEZE_COLOR
    if SERVER_LOCKED:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="Ø§Ù„ØªØ­ÙƒÙ… Ù…ØºÙ„Ù‚ Ù…Ø¤Ù‚ØªÙ‹Ø§ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„"
        )
    if FREEZE_COLOR:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ø«Ø¨Øª ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ±Ù‡"
        )
    
@app.post("/color")
async def set_color(req: ColorRequest):
    global SERVER_LOCKED, FREEZE_COLOR
    if SERVER_LOCKED:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="Ø§Ù„ØªØ­ÙƒÙ… Ù…ØºÙ„Ù‚ Ù…Ø¤Ù‚ØªÙ‹Ø§ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„"
        )
    if FREEZE_COLOR:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ø«Ø¨Øª ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ±Ù‡"
        )

@app.post("/stop")
async def stop_animation():
    global SERVER_LOCKED
    if SERVER_LOCKED:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="Ø§Ù„ØªØ­ÙƒÙ… Ù…ØºÙ„Ù‚ Ù…Ø¤Ù‚ØªÙ‹Ø§ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„"
        )
# Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø£Ø¯Ù…Ù†
class AdminLoginRequest(BaseModel):
    password: str

class AdminMessageRequest(BaseModel):
    message: str

@app.post("/admin/login")
async def admin_login(req: AdminLoginRequest):
    global ADMIN_TOKEN, login_attempts
    client_ip = Request.client.host
    
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
    if client_ip in login_attempts:
        attempts, first_attempt = login_attempts[client_ip]
        if attempts >= MAX_ATTEMPTS and time.time() - first_attempt < BLOCK_TIME:
            raise HTTPException(
                status_code=status.HTTP_429_TOO_MANY_REQUESTS,
                detail="ØªÙ… ØªØ¬Ø§ÙˆØ² Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡Ø§ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§"
            )
    
    if req.password == ADMIN_PASSWORD:
        # Ø¥Ù†Ø´Ø§Ø¡ ØªÙˆÙƒÙ† Ø¬Ø¯ÙŠØ¯
        ADMIN_TOKEN = secrets.token_urlsafe(32)
        login_attempts[client_ip] = [0, time.time()]
        return {"token": ADMIN_TOKEN}
    else:
        # ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„ÙØ§Ø´Ù„Ø©
        if client_ip in login_attempts:
            login_attempts[client_ip][0] += 1
        else:
            login_attempts[client_ip] = [1, time.time()]
        
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©"
        )

@app.post("/admin/lock")
async def admin_lock(credentials: HTTPAuthorizationCredentials = Depends(security)):
    global SERVER_LOCKED
    verify_admin_token(credentials)
    SERVER_LOCKED = True
    save_server_state()
    return {"status": "locked"}

@app.post("/admin/unlock")
async def admin_unlock(credentials: HTTPAuthorizationCredentials = Depends(security)):
    global SERVER_LOCKED
    verify_admin_token(credentials)
    SERVER_LOCKED = False
    save_server_state()
    return {"status": "unlocked"}

@app.post("/admin/freeze")
async def admin_freeze(credentials: HTTPAuthorizationCredentials = Depends(security)):
    global FREEZE_COLOR
    verify_admin_token(credentials)
    FREEZE_COLOR = True
    save_server_state()
    return {"status": "frozen"}

@app.post("/admin/unfreeze")
async def admin_unfreeze(credentials: HTTPAuthorizationCredentials = Depends(security)):
    global FREEZE_COLOR
    verify_admin_token(credentials)
    FREEZE_COLOR = False
    save_server_state()
    return {"status": "unfrozen"}

@app.post("/admin/panic")
async def admin_panic(credentials: HTTPAuthorizationCredentials = Depends(security)):
    verify_admin_token(credentials)
    # Ø¥ÙŠÙ‚Ø§Ù ÙƒÙ„ Ø´ÙŠØ¡ ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³ÙˆØ¯
    global stop_requested
    stop_requested = True
    neo.clear_strip()
    neo.update_strip()
    return {"status": "panic"}

@app.post("/admin/message")
async def admin_message(req: AdminMessageRequest, credentials: HTTPAuthorizationCredentials = Depends(security)):
    global VISITOR_MESSAGE
    verify_admin_token(credentials)
    VISITOR_MESSAGE = req.message
    save_server_state()
    return {"status": "message_set"}

@app.post("/admin/demo")
async def admin_demo_mode(credentials: HTTPAuthorizationCredentials = Depends(security)):
    global DEMO_MODE
    verify_admin_token(credentials)
    DEMO_MODE = not DEMO_MODE
    save_server_state()
    
    if DEMO_MODE:
        asyncio.create_task(start_demo_mode())
    
    return {"status": "demo_mode", "active": DEMO_MODE}

@app.post("/admin/shutdown")
async def admin_shutdown(credentials: HTTPAuthorizationCredentials = Depends(security)):
    verify_admin_token(credentials)
    # Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø®Ø§Ø¯Ù…
    os._exit(0)

# ÙˆØ¸ÙŠÙØ© ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø³ØªØ¹Ø±Ø§Ø¶ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
async def start_demo_mode():
    global DEMO_MODE, stop_requested
    animations = [
        "fade_colors", "wave_effect", "rainbow_flow", 
        "blinking_pattern", "pulse_sync", "fireworks_burst"
    ]
    
    while DEMO_MODE:
        anim = random.choice(animations)
        req = AnimationRequest(animation_type=anim)
        
        with animation_lock:
            animation_queue.clear()
            animation_queue.append(req)
        
        # Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù…Ø¯Ø© 20-30 Ø«Ø§Ù†ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„ØªØ§Ù„ÙŠ
        await asyncio.sleep(random.randint(20, 30))
        
        # Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª Ø¥Ø°Ø§ ØªÙ… ØªØ¹Ø·ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø³ØªØ¹Ø±Ø§Ø¶
        if not DEMO_MODE:
            break

# ØªØ­Ø¯ÙŠØ« Ù†Ù‚Ø·Ø© /state
@app.get("/state")
async def get_state():
    return {
        "animation": current_anim,
        "color": current_hex,
        "locked": SERVER_LOCKED,
        "frozen": FREEZE_COLOR,
        "message": VISITOR_MESSAGE,
        "demo_mode": DEMO_MODE
    }






#app.js



const vipBtn = document.getElementById('vipBtn');
const panicBtn = document.getElementById('panicBtn');
const adminModal = document.getElementById('adminModal');
const closeModal = document.querySelector('.close');
const lockBtn = document.getElementById('lockBtn');
const unlockBtn = document.getElementById('unlockBtn');
const freezeBtn = document.getElementById('freezeBtn');
const unfreezeBtn = document.getElementById('unfreezeBtn');
const panicAdminBtn = document.getElementById('panicAdminBtn');
const demoBtn = document.getElementById('demoBtn');
const shutdownBtn = document.getElementById('shutdownBtn');
const messageInput = document.getElementById('messageInput');
const setMessageBtn = document.getElementById('setMessageBtn');
const adminPassword = document.getElementById('adminPassword');
const adminLoginBtn = document.getElementById('adminLoginBtn');
const adminStatus = document.getElementById('adminStatus');
const messageBar = document.getElementById('message-bar');

let adminToken = null;
let isAdmin = false;

// ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ø¯Ù…Ù†
vipBtn.addEventListener('click', () => {
    adminModal.style.display = 'block';
});

closeModal.addEventListener('click', () => {
    adminModal.style.display = 'none';
});

window.addEventListener('click', (e) => {
    if (e.target === adminModal) {
        adminModal.style.display = 'none';
    }
});

// Ø²Ø± Ø§Ù„Ø·ÙˆØ§Ø±Ø¦
panicBtn.addEventListener('click', async () => {
    await sendRequest("/admin/panic", {}, true);
    
    // ØªØ£Ø«ÙŠØ± Ø§Ù„Ù‡Ø²
    panicBtn.classList.add('shake');
    setTimeout(() => {
        panicBtn.classList.remove('shake');
    }, 500);
});

// ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†
adminLoginBtn.addEventListener('click', async () => {
    const password = adminPassword.value;
    if (!password) return;
    
    try {
        const res = await sendRequest("/admin/login", { password });
        adminToken = res.token;
        localStorage.setItem('adminToken', adminToken);
        adminStatus.textContent = "Login successful!";
        adminStatus.style.color = "green";
        isAdmin = true;
        activateAdminControls(true);
    } catch (e) {
        adminStatus.textContent = e.message || "Login failed";
        adminStatus.style.color = "red";
    }
});

// ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ…
function activateAdminControls(active) {
    const controls = [
        lockBtn, unlockBtn, freezeBtn, unfreezeBtn, 
        panicAdminBtn, demoBtn, shutdownBtn, setMessageBtn
    ];
    
    controls.forEach(btn => {
        btn.disabled = !active;
    });
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙƒÙ† Ø§Ù„Ø£Ø¯Ù…Ù† Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
window.addEventListener('DOMContentLoaded', () => {
    const savedToken = localStorage.getItem('adminToken');
    if (savedToken) {
        adminToken = savedToken;
        isAdmin = true;
        activateAdminControls(true);
    }
});

// ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø¯Ù…Ù†
lockBtn.addEventListener('click', () => sendAdminCommand("/admin/lock"));
unlockBtn.addEventListener('click', () => sendAdminCommand("/admin/unlock"));
freezeBtn.addEventListener('click', () => sendAdminCommand("/admin/freeze"));
unfreezeBtn.addEventListener('click', () => sendAdminCommand("/admin/unfreeze"));
panicAdminBtn.addEventListener('click', () => sendAdminCommand("/admin/panic"));
demoBtn.addEventListener('click', () => sendAdminCommand("/admin/demo"));
shutdownBtn.addEventListener('click', () => {
    if (confirm("Are you sure you want to shutdown the server?")) {
        sendAdminCommand("/admin/shutdown");
    }
});

setMessageBtn.addEventListener('click', async () => {
    const message = messageInput.value;
    if (!message) return;
    
    await sendAdminCommand("/admin/message", { message });
});

async function sendAdminCommand(endpoint, data = {}) {
    try {
        await sendRequest(endpoint, data, true);
    } catch (e) {
        adminStatus.textContent = e.message || "Command failed";
        adminStatus.style.color = "red";
    }
}

// ÙˆØ¸ÙŠÙØ© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©
async function sendRequest(endpoint, data, isAdmin = false) {
    const headers = {
        "Content-Type": "application/json"
    };
    
    if (isAdmin && adminToken) {
        headers["Authorization"] = `Bearer ${adminToken}`;
    }
    
    try {
        const res = await fetch(`${API_BASE_URL}${endpoint}`, {
            method: "POST",
            headers: headers,
            body: JSON.stringify(data)
        });
        
        if (!res.ok) {
            const error = await res.json();
            throw new Error(error.detail || "Request failed");
        }
        
        return await res.json();
    } catch (e) {
        console.error("API Error:", e);
        throw e;
    }
}



// Ø¬Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† /state ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
async function fetchAndApplyState() {
    try {
        const res = await fetch(`${API_BASE_URL}/state`);
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const state = await res.json();

        if (state.locked) {
            document.querySelectorAll('.button-container button:not(.admin-control)').forEach(btn => {
                btn.disabled = true;
                btn.title = "Ø§Ù„ØªØ­ÙƒÙ… Ù…ØºÙ„Ù‚ Ù…Ø¤Ù‚ØªÙ‹Ø§ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„";
            });
            colorPicker.disabled = true;
        } else {
            document.querySelectorAll('.button-container button').forEach(btn => {
                btn.disabled = false;
                btn.title = "";
            });
            colorPicker.disabled = false;
        }

        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        if (state.message) {
            messageBar.textContent = state.message;
            messageBar.style.display = "block";
            
            // ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙ…Ø±ÙŠØ±
            const textWidth = messageBar.scrollWidth;
            const containerWidth = messageBar.clientWidth;
            
            if (textWidth > containerWidth) {
                const duration = textWidth / 50; // Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ±
                messageBar.style.animation = `scroll ${duration}s linear infinite`;
            }
        } else {
            messageBar.style.display = "none";
        }

<!-- index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="image.icon">
    <link rel="stylesheet" href="s.css">
    <title>LED Color Controller</title>
</head>
<body>
    <div class="card">
        <h1 class="led-title">LED Color Controller</h1>
        <div class="color-display" id="colorDisplay">Loadingâ€¦</div>

        <h2 class="button-title">Colors</h2>
        <div class="button-container">
            <button id="redBtn"    onclick="changeColor('#ff0000')">Red</button>
            <button id="blueBtn"   onclick="changeColor('#0000ff')">Blue</button>
            <button id="greenBtn"  onclick="changeColor('#00ff00')">Green</button>
            <button id="orangeBtn" onclick="changeColor('#FFA500')">Orange</button>
            <button id="yellowBtn" onclick="changeColor('#FFFF00')">Yellow</button>
            <button id="purpleBtn" onclick="changeColor('#A020F0')">Purple</button>
            <!-- <button id="pinkBtn"   onclick="changeColor('#FFC0CB')">Pink</button> -->
            <button id="whiteBtn"  onclick="changeColor('#FFFFFF')">White</button>
            <!-- <button id="grayBtn"   onclick="changeColor('#808080')">Gray</button> -->
            <!-- <button id="brownBtn"  onclick="changeColor('#964B00')">Brown</button> -->
            <br>
            <button id="offBtn" onclick="changeColor('#000000')">Off</button>
        </div>

        <h2 class="button-title">Animation</h2>
        <div class="button-container">
            <button id="lightOneBtn">Fade Colors</button>
            <button id="WaveEffectBtn">Wave Effect</button>
            <button id="RainbowFlowBtn">Rainbow Flow</button>
            <button id="BlinkingPatternBtn">Blinking Pattern</button>
            <button id="RunningLightsBtn">Running Lights</button>
            <button id="BreathingEffectBtn">Breathing Effect</button>
            <button id="MeteorShowerBtn">Meteor Shower</button>
            <button id="PulseSyncBtn">Pulse Sync</button>
            <button id="FireworksBurstBtn">Fireworks Burst</button> 
            <button id="MeteorShowerNewBtn">MeteorÂ Shower</button>
            <button id="off2Btn" onclick="changeColor('#000000')">Off</button>
        </div>

        <h2 class="button-title">Color Picker</h2>
        <div class="color-picker-wrapper">
            <div class="color-ring"></div>
            <input type="color" id="colorPicker" value="#000000">
        </div>

        <h2 class="button-title">Create Your Own</h2>
        <div class="button-container">
            <button id="customFadeBtn">Fade Colors </button>
            <button id="customBlinkBtn">Blinking Pattern</button>
            <button id="customBreathingBtn">Breathing Effect</button>
            <button id="customMeteorShowerBtn">Meteor Shower</button>
            <button id="customPulseSyncBtn">Pulse Sync</button>
            <button id="customGlitchFlashBtn">Glitch Flash</button>
            <button id="customHeartBeatBtn">Heart Beat</button>
            <button id="customTunnelEffectBtn">Tunnel Effect</button>
            <button id="customLaserShotBtn">Laser Shot</button>
            <button id="customSparklingStarsBtn">Sparkling Stars</button>
            <button id="customStrobeFlashBtn">Strobe Flash</button>
            <button id="customKnightRiderBtn">Knight Rider</button>
            <button id="customBounceBackBtn">Bounce Back</button>
            <button id="customRippleTouchBtn">Ripple Touch</button>
            <button id="customFireFlickerBtn">Fire Flicker</button>
            <button id="customColorWipeBtn">Color Wipe</button>
            <button id="customStaticGlowBtn">Static Glow with Flicker</button>
            <button id="customColorEchoBtn">Color Echo</button>
            <button id="customTimeWarpBtn">Time Warp</button>
            <button id="customQuantumFlickerBtn">Quantum Flicker</button>
            <button id="customRunningLightsBtn">Running Lights</button>
            <button id="customFireworksBurstBtn">Fireworks Burst</button>
            <button id="off2Btn" onclick="changeColor('#000000')">Off</button>

        </div>
    </div>
    <div id="message-bar" class="message-bar"></div>

    <div class="card">
        <!-- Ø²Ø± VIP -->
        <button id="vipBtn" class="vip-button">
            <span class="vip-icon">ðŸ‘‘</span> VIP
        </button>
        
        <!-- ... Ø¨Ù‚ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ ... -->
        
        <!-- Ø²Ø± Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ -->
        <div class="button-container">
            <button id="panicBtn" class="panic-button">ðŸ†˜ Panic</button>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Admin Panel</h2>
            
            <div class="admin-section">
                <h3>Server Control</h3>
                <button id="lockBtn">Lock Controls</button>
                <button id="unlockBtn">Unlock Controls</button>
                <button id="freezeBtn">Freeze Color</button>
                <button id="unfreezeBtn">Unfreeze Color</button>
                <button id="panicAdminBtn">Panic Button</button>
                <button id="demoBtn">Toggle Demo Mode</button>
                <button id="shutdownBtn">Shutdown Server</button>
            </div>
            
            <div class="admin-section">
                <h3>Visitor Message</h3>
                <input type="text" id="messageInput" placeholder="Enter message for visitors">
                <button id="setMessageBtn">Set Message</button>
            </div>
            
            <div class="admin-section">
                <h3>Login</h3>
                <input type="password" id="adminPassword" placeholder="Admin Password">
                <button id="adminLoginBtn">Login</button>
                <p id="adminStatus"></p>
            </div>
        </div>
    </div>

    <div id="aura-shapes">
        <div class="aura-shape triangle"></div>
        <div class="aura-shape square"></div>
        <div class="aura-shape circle"></div>
        <div class="neon-comet"></div>
        <div class="neon-comet"></div>
        <div class="neon-comet"></div>
        <div class="neon-comet"></div>
        <div class="neon-comet"></div>
        <div class="neon-comet"></div>
        <div class="energy-wave"></div>
        <div class="background-particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
        <div class="light-fog"></div>
    </div>

    <div class="stars-container">
    </div>

    <script src="app.js"></script>
</body>
</html>
