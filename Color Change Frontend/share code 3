async def custom_knight_rider_loop(hex_color: str, delay: float = 0.03):
    """
    Custom Knight Rider:
    - Multiple pulses moving inward and outward in a dancing pattern.
    """
    global stop_requested
    r = int(hex_color[1:3], 16)
    g = int(hex_color[3:5], 16)
    b = int(hex_color[5:7], 16)

    mid = NUM_LEDS // 2
    offset = 0
    expand = True  # True: outwards, False: inwards

    while not stop_requested:
        neo.clear_strip()

        # نرسم أزواج من المنتصف للخارج والعكس
        for i in range(5):  # عدد النقاط المتقابلة
            left = mid - offset - i * 4
            right = mid + offset + i * 4
            for idx in [left, right]:
                if 0 <= idx < NUM_LEDS:
                    neo.set_led_color(idx, r, g, b)

        neo.update_strip()
        await asyncio.sleep(delay)

        if expand:
            offset += 1
            if mid + offset >= NUM_LEDS - 1 or mid - offset <= 0:
                expand = False
        else:
            offset -= 1
            if offset <= 0:
                expand = True

    neo.clear_strip()
    neo.update_strip()
