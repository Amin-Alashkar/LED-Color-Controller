async def custom_bounce_back_loop(hex_color: str, delay: float = 0.02):
    """
    Custom Bounce Back (150 LEDs Edition):
    - Multiple LEDs move back and forth together.
    - Pulse effect without tails.
    """
    global stop_requested
    r = int(hex_color[1:3], 16)
    g = int(hex_color[3:5], 16)
    b = int(hex_color[5:7], 16)

    pulse_width = 5  # عدد الأضواء في البالس
    position = 0
    direction = 1

    while not stop_requested:
        neo.clear_strip()

        for i in range(pulse_width):
            idx = position + i
            if 0 <= idx < NUM_LEDS:
                neo.set_led_color(idx, r, g, b)

        neo.update_strip()
        await asyncio.sleep(delay)

        # وقفة بسيطة عند الأطراف
        if position <= 0 or position + pulse_width >= NUM_LEDS:
            await asyncio.sleep(0.2)
            direction *= -1

        position += direction

        # ما نخليه يطلع بره
        if position < 0:
            position = 0
            direction = 1
        elif position + pulse_width > NUM_LEDS:
            position = NUM_LEDS - pulse_width
            direction = -1

    neo.clear_strip()
    neo.update_strip()
