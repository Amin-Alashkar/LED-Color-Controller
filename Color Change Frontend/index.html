<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="s.css">
    <title>LED Color Controller</title>

</head>
<body>
    <div class="card">
        <h1 class="led-title">LED Color Controller</h1>
        <div class="color-display" id="colorDisplay">#FF0000</div>
        <h2 class="button-title">Colors</h2>
        <div class="button-container">
            <button id="redBtn" onclick="changeColor('#ff0000')">Red</button>
            <button id="greenBtn" onclick="changeColor('#00ff00')">Green</button>
            <button id="blueBtn" onclick="changeColor('#0000ff')">Blue</button>            
            <button id="orangeBtn" onclick="changeColor('#FFA500')">Orange</button>
            <button id="yellowBtn" onclick="changeColor('#FFFF00')">Yellow</button>
            <button id="purpleBtn" onclick="changeColor('#A020F0')">Purple </button>
            <button id="pinkBtn" onclick="changeColor('#FFC0CB')">Pink </button>
            <button id="whiteBtn" onclick="changeColor('#FFFFFF')">White </button>
            <button id="gray-greyBtn" onclick="changeColor('#808080')">Gray </button>
            <button id="brownBtn" onclick="changeColor('#964B00')">Brown </button>
            <br>
            <button id="offBtn" onclick="changeColor('#000000')">Off </button>
        </div>
        <div class="color-picker-wrapper">
            <div class="color-ring"></div>
            <input type="color" id="colorPicker" oninput="updateColor(this.value)" value="#ff0000">
        </div>
        <h2 class="button-title">Animation</h2>
        <div class="button-container">
            <button id="lightOneBtn" onclick="changeColor('')">Light One by One</button>
            <button id="Btn" onclick="changeColor('')">Wave Effect</button>
            <button id="Btn" onclick="changeColor('')">Fade In & Out</button>            
            <button id="Btn" onclick="changeColor('')">Rainbow Flow</button>
            <button id="Btn" onclick="changeColor('')">Blinking Pattern </button>
            <button id="Btn" onclick="changeColor('')">Running Lights</button>
            <button id="Btn" onclick="changeColor('')">Breathing Effect</button>
            <button id="Btn" onclick="changeColor('')">Meteor Shower</button>
            <button id="Btn" onclick="changeColor('')">Pulse Sync</button>
            <button id="Btn" onclick="changeColor('')">Fireworks Burst</button>
            <br>
            <button id="offBtn" onclick="changeColor('#000000')">Off </button>
        </div>
    </div>
    
    <script>
    const colorDisplay = document.getElementById('colorDisplay');

    function color_change(color) {
        fetch("http://10.220.1.123:8000/colors/", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                hex_color: color,
            }),
        })
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error('Error:', error));
    }

    function changeColor(color) {
        document.body.style.background = color;
        document.body.style.boxShadow = `0 0 80px ${color}80 inset`;
        colorDisplay.style.background = color;
        colorDisplay.textContent = color.toUpperCase();
        document.getElementById('colorPicker').value = color;
        setTextColor(color);
        color_change(color); // Call the defined function instead
    }

    function updateColor(color) {
        changeColor(color);
    }

    function setTextColor(color) {
        const r = parseInt(color.substr(1,2), 16);
        const g = parseInt(color.substr(3,2), 16);
        const b = parseInt(color.substr(5,2), 16);
        const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
        document.querySelector('h1').style.color = luminance > 0.5 ? '#333' : '#fff';
        document.querySelector('.card').style.background = luminance > 0.5 ? 'white' : 'rgba(0,0,0,0.7)';
    }

    changeColor('#ff0000');

    document.getElementById("lightOneBtn").addEventListener("click", function() {
        this.classList.toggle("light-one");
    });
</script>

</body>
</html>