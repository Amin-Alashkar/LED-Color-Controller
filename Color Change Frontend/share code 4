// --- إضافة: أوصاف Wave (مثل Fade) ---
const waveDescriptions = [
  'Waves of color roll across the strip, moving with a calm, inevitable rhythm. Tweak brightness to set how bold the tide feels.',
  'A flowing motion that feels like a visible pulse—light travels LED by LED. Control the glow and slow it down or speed it up.',
  'The effect sweeps in waves, never stopping. Dial brightness to decide whether it whispers or shouts.',
  'Colors travel in sequence, like a tide pulling light forward. Adjust intensity to match the room energy.',
  'A subtle choreography of motion—each wave arrives, lingers, then moves on. Brightness gives you the mood control.',
  'Imagine a visible sound wave: smooth, repeating, and slightly mysterious. You pick how vivid it plays.',
  'Not just movement—an ongoing current of color. Push brightness to make it prominent or soften it to blend in.'
];

// --- استبدال دالة initTooltips الحالية بهادي ---
function initTooltips() {
    const tooltip = document.getElementById('animationTooltip');
    const tooltipTitle = document.getElementById('tooltipTitle');
    const tooltipDescription = document.getElementById('tooltipDescription');

    // دالة لتوليد ألوان عشوائية زاهية (خليك فيها كما هي)
    function generateRandomColors() {
        const hue1 = Math.floor(Math.random() * 360);
        const hue2 = (hue1 + 120 + Math.floor(Math.random() * 60) - 30) % 360;
        const hue3 = (hue2 + 120 + Math.floor(Math.random() * 60) - 30) % 360;

        return [
            `hsl(${hue1}, 100%, 60%)`,
            `hsl(${hue2}, 100%, 60%)`,
            `hsl(${hue3}, 100%, 60%)`
        ];
    }

    // helper: احصل وصف عشوائي حسب الـ buttonId (fallback للوصف الافتراضي)
    function getRandomDescriptionFor(buttonId) {
        if (buttonId === 'lightOneBtn' || buttonId === 'customFadeBtn') {
            // استخدم fadeDescriptions لو موجودة
            if (Array.isArray(fadeDescriptions) && fadeDescriptions.length) {
                return fadeDescriptions[Math.floor(Math.random() * fadeDescriptions.length)];
            }
        }
        if (buttonId === 'WaveEffectBtn') {
            if (Array.isArray(waveDescriptions) && waveDescriptions.length) {
                return waveDescriptions[Math.floor(Math.random() * waveDescriptions.length)];
            }
        }
        // افتراضيًا ارجع الوصف من tooltipData إذا موجود
        return (tooltipData[buttonId] && tooltipData[buttonId].description) || '';
    }

    // إضافة حدث لجميع الأزرار
    document.querySelectorAll('button').forEach(button => {
        const buttonId = button.id;

        if (tooltipData[buttonId]) {
            // mouseenter
            button.addEventListener('mouseenter', (e) => {
                const rect = button.getBoundingClientRect();

                // تعيين العنوان من tooltipData دائماً
                tooltipTitle.textContent = tooltipData[buttonId].title || '';

                // تعيين الوصف: إذا عندنا وصف عشوائي مخصص للزر نستخدمه
                tooltipDescription.textContent = getRandomDescriptionFor(buttonId);

                // توليد ألوان عشوائية جديدة
                const [color1, color2, color3] = generateRandomColors();

                // تعيين الألوان العشوائية للـ tooltip (CSS vars)
                tooltip.style.setProperty('--random-color-1', color1);
                tooltip.style.setProperty('--random-color-2', color2);
                tooltip.style.setProperty('--random-color-3', color3);

                // تحديد موقع الـ tooltip بجانب الزر
                tooltip.style.left = `${rect.left + (rect.width / 2)}px`;
                tooltip.style.top = `${rect.top - 10}px`;
                tooltip.style.transform = 'translate(-50%, -100%)';

                // إظهار الـ tooltip
                tooltip.classList.add('show');

                // تحديث لون الـ tooltip بناءً على لون الزر إن أمكن
                const buttonColor = window.getComputedStyle(button).backgroundColor;
                if (buttonColor && buttonColor !== 'rgba(0, 0, 0, 0)') {
                    tooltip.style.setProperty('--ui-color', buttonColor);
                }
            });

            // mouseleave
            button.addEventListener('mouseleave', () => {
                tooltip.classList.remove('show');
            });
        }
    });
}
